<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Todo list app</title>

     <link rel="stylesheet" href="style.css">
     <script src="jquery.js"></script>
</head>
<body>
     <div id="container">
          <div id="wrap">
               <h1>Task List <span>0</span></h1>
     
               <ul id="tasks"></ul>
               <ul id="done"></ul>
     
               <div id="new-task">
                    <input type="text" placeholder="Add a task"><button>+</button>
               </div>
          </div>
     </div>

     <script>
          $(function () {
               $("#new-task button").click(function() {
                    var task= $("#new-task input").val();

                    if(!task) return false;

                    buildTask(task).appendTo("#tasks");

                    $("h1 span").html( $("#tasks li").length);
                    
                    $("#new-task input").val("").focus();

               });

               $("#new-task input").keydown(function (e) {
                         if(e.which == 13){
                              $("#new-task button").click();
                         };
               });
               

               function buildTask(msg) {
                    var checkbox = $("<input>", {
                         type : "checkbox"
                    }).click(function () {
                         if ($(this).is(":checked")){
                              $(this).parent().prependTo("#done");
                         } else {
                              $(this).parent().appendTo("#tasks");
                         };

                         $("h1 span").html($("#task li").length );
                    });

                    var task = $("<span>").html(msg);

                    var del = $("<a>;",{
                         href : "#"
                    }).html("&times;").click(function () {
                         $(this).parent().remove();
                         $("h1 span").html($("#tasks li").length);
                    });

                    return $("<li>").append(checkbox).append(task).append(del);
               }
          });
     </script>
</body>
</html>